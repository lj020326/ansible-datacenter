---
- name: Setup ubuntu motd
  when: ansible_distribution == 'Ubuntu'
  become: true
  block:
    - name: Remove ubuntu motd spam
      ansible.builtin.file:
        path: /etc/update-motd.d/{{ item }}
        state: absent
      loop:
        - 80-livepatch
        - 95-hwe-eol
        - 10-help-text

#    - name: Ensure 50-landscape-sysinfo
#      ansible.builtin.file:
#        src: /usr/share/landscape/landscape-sysinfo.wrapper
#        dest: /etc/update-motd.d/50-landscape-sysinfo
#        state: link

    - name: Adding motd
      ansible.builtin.template:
        src: motd.conf.j2
        dest: /etc/update-motd.d/20-internal-info
        mode: "0644"

#- name: emojify
#  ansible.builtin.shell: sh -c "curl https://raw.githubusercontent.com/mrowa44/emojify/master/emojify -o /usr/local/bin/emojify && chmod +x /usr/local/bin/emojify"
