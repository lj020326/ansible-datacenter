---
# Default variables based on README.md
deploy_ca_certs__vault_url: "https://vault.example.com:8200"
deploy_ca_certs__vault_token: ""
deploy_ca_certs__vault_mount_path: "pki-intermediate"
deploy_ca_certs__pki_cert_role_name: "ca_role"
deploy_ca_certs__vault_kv_path: "kv/pki"
deploy_ca_certs__certificate_ttl: "720h"
deploy_ca_certs__ca_service_routes_list: []
deploy_ca_certs__external_cacerts: []
deploy_ca_certs__validation_url: "{{ deploy_ca_certs__vault_url }}"

# The intermediate CA configuration is defined here and can be overridden in inventory
deploy_ca_certs__root_ca_configs:
  output_basename: "intermediate-ca"
  csr_json_filename: "intermediate-ca-csr.json"
  common_name: "MyOrg Intermediate CA"
  key_algo: "ecdsa"
  key_size: 256

deploy_ca_certs__cacert_local_cert_dir: "/usr/local/ssl/certs"
deploy_ca_certs__cacert_local_key_dir: "/usr/local/ssl/private"
deploy_ca_certs__ca_java_keystore_enabled: false
deploy_ca_certs__ca_java_keystore_pass: "changeit"

deploy_ca_certs__hostname_full: "{{ ansible_fqdn }}"
deploy_ca_certs__hostname_short: "{{ ansible_hostname }}"

# Variable to store the basename of the intermediate cert
__deploy_ca_certs__pki_vault_ca_cert_basename: "{{ deploy_ca_certs__root_ca_configs.output_basename }}"

# The intermediate CA source path is now constructed from existing variables
deploy_ca_certs__intermediate_ca_source_path: "{{ deploy_ca_certs__vault_kv_path }}/intermediate/{{ __deploy_ca_certs__pki_vault_ca_cert_basename }}"

# OS-specific variables (with Debian values as defaults)
__deploy_ca_certs__trust_ca_cacert_dir_default: /usr/local/share/ca-certificates
__deploy_ca_certs__trust_ca_update_trust_cmd_default: update-ca-certificates
__deploy_ca_certs__ca_java_keystore_default: /etc/ssl/certs/java/cacerts
