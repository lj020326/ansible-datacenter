---
- name: Ensure git is installed (RedHat).
  when:
    - not bootstrap_git__install_from_source | bool
    - ansible_facts['os_family'] == 'RedHat'
  ansible.builtin.package:
    name: "{{ bootstrap_git__packages }}"
    state: present
    enablerepo: "{{ bootstrap_git__enablerepo | default(omit) }}"

- name: Update apt cache (Debian).
  when: ansible_facts['os_family'] == 'Debian'
  ansible.builtin.apt:
    update_cache: true
    cache_valid_time: 86400

- name: Ensure git is installed (Debian).
  when:
    - not bootstrap_git__install_from_source | bool
    - ansible_facts['os_family'] == 'Debian'
  ansible.builtin.apt:
    name: "{{ bootstrap_git__packages }}"
    state: present

- name: Run install-from-source.yml
  when: bootstrap_git__install_from_source | bool
  ansible.builtin.import_tasks: install-from-source.yml
