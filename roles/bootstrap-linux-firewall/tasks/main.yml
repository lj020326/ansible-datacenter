---

- include_vars: "{{ item }}"
  with_first_found:
    - "{{ ansible_distribution }}-{{ ansible_distribution_major_version}}.yml"
    - "{{ ansible_distribution }}.yml"
    - "{{ ansible_os_family }}.yml"
    - "default.yml"

- name: Disable firewalld
  when: not firewalld_enabled | bool
  service:
    name: firewalld
    state: stopped
    enabled: no

- name: Bootstrap firewalld
  when: not firewalld_install
  include_tasks: uninstall.yml

- name: Configure firewalld
  when: firewalld_install
  include_tasks: setup.yml

- name: Configure firewalld
  include_tasks: configure.yml
