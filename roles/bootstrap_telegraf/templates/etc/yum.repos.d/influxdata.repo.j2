[influxdb]
name = InfluxDB Repository - {{ ansible_facts['distribution'] }} $releasever
{% if ansible_facts['distribution']|lower == "amazon" %}
baseurl = "{{ telegraf_influxdata_base_url }}/centos/6/amd64/{{ telegraf_install_version }}"
{% elif ansible_facts['distribution']|lower == "redhat" %}
baseurl = {{ telegraf_influxdata_base_url }}/rhel/$releasever/$basearch/{{ telegraf_install_version }}
{% elif ansible_facts['distribution']|lower == "oraclelinux" %}
baseurl = {{ telegraf_influxdata_base_url }}/rhel/$releasever/$basearch/{{ telegraf_install_version }}
{% elif ansible_facts['distribution']|lower == "rocky" %}
baseurl = {{ telegraf_influxdata_base_url }}/rhel/$releasever/$basearch/{{ telegraf_install_version }}
{% elif ansible_facts['distribution']|lower == "fedora" %}
baseurl = {{ telegraf_influxdata_base_url }}/rhel/{{ '8' if ansible_facts['distribution_major_version']|int >= 28 else '7' }}/$basearch/{{ telegraf_install_version }}
{% else %}
baseurl = {{ telegraf_influxdata_base_url }}/{{ ansible_facts['distribution']|lower }}/$releasever/$basearch/{{ telegraf_install_version }}
{% endif %}
enabled = 1
gpgcheck = 1
gpgkey = {{ telegraf_influxdata_base_url }}/influxdb.key
sslverify = 1
