---

- name: webmin | RedHat | Add Optional channel (RedHat)
  template:
    src: webmin.centos.repo.j2
    dest: /etc/yum.repos.d/webmin.repo
    mode: "0644"

## ref: https://stackoverflow.com/questions/38327406/how-to-install-yum-repository-key-with-ansible
## ref: https://www.digitalocean.com/community/tutorials/how-to-install-and-use-webmin-on-centos-7
- name: webmin | RedHat | Add yum repository key
  rpm_key:
    key: "{{ bootstrap_webmin__repo_key_url }}"

## ref: https://www.redpill-linpro.com/sysadvent/2017/12/24/ansible-system-updates.html
## ref: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/yum_module.html
- name: webmin | RedHat | Update yum repo and cache
#  yum:
  package:
    name: '*'
    state: latest
    update_cache: yes

- name: webmin | RedHat | Install webmin package
  package:
    name: webmin
    state: present
#    state: latest
#    update_cache: yes
#  changed_when: no
