---

- name: "webmin | Ensure /etc/webmin/miniserv.users"
  template:
    src: miniserv.users.ini.j2
    dest: /etc/webmin/miniserv.users
    mode: '0600'
    backup: yes

- name: "webmin | Ensure /etc/webmin/webmin.acl"
  template:
    src: miniserv.users.ini.j2
    dest: /etc/webmin/miniserv.users
    mode: '0600'
    backup: yes

- name: "webmin | Set webmin user passwords"
  no_log: yes
  shell: "{{ bootstrap_webmin__base_dir }}/changepass.pl /etc/webmin admin {{ item.password }}"
  loop: "{{ bootstrap_webmin__users }}"
  register: __set_webmin_user_passwords_result

- name: "webmin | Display __set_webmin_user_passwords_result"
  debug:
    var: __set_webmin_user_passwords_result
