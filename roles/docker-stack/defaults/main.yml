---

docker_stack_python_docker_interpreter: "/usr/local/bin/python-docker"

__docker_stack_supported_actions:
  - setup
  - start
  - restart
  - stop
  - up
  - down

docker_stack_action: 'setup'

__docker_stack_ca_cert_bundle: "{{ docker_stack_ca_cert_bundle | d(__docker_stack_ca_cert_bundle_default) }}"
__docker_stack_ca_java_keystore: "{{ docker_stack_ca_java_keystore | d(__docker_stack_ca_java_keystore_default) }}"

#############
### This is the key role input dictionary used
#############
docker_stack_service_groups: []
#docker_stack_service_groups:
#  - name: base
#    source: role

docker_stack_traefik_routing_method: dns
#docker_stack_traefik_routing_method: path

docker_stack_proxy_services: []

#docker_stack_traefik_version: v1
docker_stack_traefik_version: v2

docker_stack_traefik_http: 80
docker_stack_traefik_https: 443
docker_stack_traefik_https_suffix: "{{ ':' + docker_stack_traefik_https|string if docker_stack_traefik_https|string != '443' else '' }}"

docker_stack_traefik_ssh: 2022

docker_stack_acme_http_challenge_proxy_port: 8980

#docker_stack_enable_cacerts: no
#docker_stack_enable_selfsigned_certs: yes
docker_stack_enable_cacerts: yes
docker_stack_enable_selfsigned_certs: no

docker_stack_setup_registry: no
docker_stack_setup_admin_scripts: yes

docker_stack_compose_http_timeout: 120

#############
## LDAP domain config - ldap vars used in multiple stacks
#############
docker_stack_ldap_host: "ldap.example.int"
docker_stack_ldap_port: "389"
docker_stack_ldap_uri: "ldap://{{ docker_stack_ldap_host }}:{{ docker_stack_ldap_port }}"
docker_stack_ldap_organisation: "Example LLC"
docker_stack_ldap_domain: "example.int"
docker_stack_ldap_admin_password: "password"
docker_stack_ldap_config_password: "passsword"
docker_stack_ldap_readonly_user: "true"
docker_stack_ldap_readonly_username: "readonly"
docker_stack_ldap_readonly_password: "f00b4r!23"

docker_stack_ldap_base_dn: "dc=example,dc=int"

docker_stack_ldap_group_users_gid: 502

docker_stack_ldap_group_ou: "groups"
docker_stack_ldap_group_base_dn: "ou={{ docker_stack_ldap_group_ou }},{{ docker_stack_ldap_base_dn }}"
docker_stack_ldap_user_ou: "users"
docker_stack_ldap_user_base_dn: "ou={{ docker_stack_ldap_user_ou }},{{ docker_stack_ldap_base_dn }}"
docker_stack_ldap_idmap_ou: "Idmap"
docker_stack_ldap_idmap_base_dn: "ou={{ docker_stack_ldap_idmap_ou }},{{ docker_stack_ldap_base_dn }}"

docker_stack_ldap_computer_base_ou: "computers"
docker_stack_ldap_computer_base_dn: "ou={{ docker_stack_ldap_computer_base_ou }},{{ docker_stack_ldap_base_dn }}"
docker_stack_ldap_host_base_ou: "hosts"
docker_stack_ldap_host_base_dn: "ou={{ docker_stack_ldap_host_base_ou }},{{ docker_stack_ldap_base_dn }}"

#docker_stack_ldap_search_user_cn: "search"
#docker_stack_ldap_search_user_dn: "cn={{ docker_stack_ldap_search_user_cn }},{{ docker_stack_ldap_base_dn }}"
#docker_stack_ldap_search_user_password: "DaBc$3412"

docker_stack_ldap_samba_sid_root: "S-1-5-21-1234567890-0987654321-0123456789"
#docker_stack_ldap_samba_primary_group_sid: "{{ docker_stack_ldap_samba_sid_root }}-1234"
#docker_stack_ldap_samba_admin_sid: "S-1-5-21-1234567890-0987654321-0123456789-500"
#docker_stack_ldap_samba_domain_hosts_samba_sid: "{{ docker_stack_ldap_samba_sid_root }}-515"

docker_stack_ldap_user_smb_base_dir: '\\samba.{{ docker_stack_ldap_domain }}'
docker_stack_ldap_user_smb_profile_base: '{{ docker_stack_ldap_user_smb_base_dir }}\profiles'

#docker_stack_ldap_user_root_samba_nt_password: "ertRgh%yr54t34Trf"
#docker_stack_ldap_user_root_password: "4werPoidfk!jhy8"

##############
### LDAP domain admin info
##############
#docker_stack_ldap_user_domain_admin_uid: "netadmin"
#docker_stack_ldap_user_domain_admin_dn: "uid={{ docker_stack_ldap_user_domain_admin_uid }},{{ docker_stack_ldap_user_base_dn }}"
#docker_stack_ldap_user_domain_admin_samba_nt_password: "ertRgh%yr54t34Trf"
#docker_stack_ldap_user_domain_admin_samba_hosts: "vm10,vm11,ljlaptop,oradb1,plex,samba,vcenter"
#docker_stack_ldap_user_domain_admin_password: "4werPoidfk!jhy8"
#docker_stack_ldap_user_domain_admin_ssh_public_key: "publickeyhere"

#############
## openLDAP domain config
#############

## ref: https://serverfault.com/questions/885324/background-on-sambasid-calculation
docker_stack_ldap_domain_sid_root: "S-1-5-21-1234567890-5678912345-987654321"

docker_stack_ldap_domain_user_object_class_list_default:
  - inetOrgPerson
  - organizationalPerson
  - person
  - posixAccount
  - sambaSamAccount
  - shadowAccount

docker_stack_ldap_domain_group_object_class_list_default:
  - top
  - posixGroup

docker_stack_ldap_domain_host_object_class_list_default:
  - account
  - posixAccount
  - sambaSamAccount

docker_stack_ldap_samba_domain_map: {}
docker_stack_ldap_domain_ou_map:
  groups: {}
  users: {}
  Idmap: {}
  hosts: {}
  computers: {}

docker_stack_ldap_base_user_map:
  search:
    username: search
    ssha_password: "{ssha}GSmbWLYqiCMjPSJobxU4rfd/4fRX8okq3Zb4g=="
    description: LDAP read only user
    object_class_list:
      - organizationalRole
      - simpleSecurityObject

docker_stack_ldap_domain_user_map: {}
#docker_stack_ldap_domain_user_map:
#  ljohnson:
#    username: ljohnson
#    uid_number: 10100
#    display_name: Lee Johnson
#    initials: LJ
#    mail: ljohnson@example.org
#    groups:
#      - smbuser
#    samba:
#      sid: "{{ docker_stack_ldap_samba_sid_root }}-10100"
#      nt_password: "A9658B834645YT9E2AA7BBB4D0286DDA4"
#      workstations: "ljlaptop,oradb1,vcenter"
#    ssha_password: "{SSHA}BMUL5QS4Oas2xvFQ+J6sdDZHaAWNtWQ=="
#    ssh_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDMX0dPcvoiLIR3qdv+FXLE/yia
#      3pC3w+tJCGs36b5OmKZDkElfR8+LtuYyX6Rb lee.james.johnson@gmail.com

docker_stack_ldap_domain_group_map: {}
docker_stack_ldap_domain_host_map: {}


######################
######################
docker_stack_run_services: yes
#docker_stack_run_services: no
docker_stack_restart_service: no

docker_stack_traefik_proxy_network: "traefik_public"

docker_stack_networks: {}

#docker_stack_volumes:
#  prometheus: {}
#  grafana: {}
#  alertmanager: {}
#  keycloak_data: {}
##  bacula_pgdata: {}
##  postgres_data:
##      driver: local
##  gitea:
##    driver: local

docker_stack_volumes: {}

docker_stack_configs: {}

#docker_stack_configs:
#  dockerd_config:
#    file: ./dockerd-exporter/Caddyfile
#  node_rules:
#    file: ./prometheus/rules/swarm_node.rules.yml
#  task_rules:
#    file: ./prometheus/rules/swarm_task.rules.yml

#####################
## container user
docker_stack_user_username: container-user
docker_stack_user_password: container-user
docker_stack_user_group: container-user
docker_stack_user_uid: 1006
docker_stack_user_gid: 1006

#docker_stack_user_username: docker-user
#docker_stack_user_password: docker-user
#docker_stack_user_group: docker-user

#docker_stack_docker_group_gid: 497
docker_stack_docker_group_gid: 991

docker_stack_container_user_home: /var/internaluser

docker_stack_config_users_passwd: |
  {{ docker_stack_user_username }}:x:{{ docker_stack_user_uid }}:{{ docker_stack_user_gid }}::{{ docker_stack_container_user_home }}:/bin/bash

docker_stack_config_users_group: |
  {{ docker_stack_user_username }}:x:{{ docker_stack_user_gid }}:

## docker stack vars
docker_stack_dir: "{{ docker_stack_user_home }}/docker"
docker_stack_compose_file: "{{ docker_stack_dir }}/docker-compose.yml"
docker_stack_remove_orphans: yes

docker_stack_ca_root_cn: "ca-root"

docker_stack_acme_email: "admin@example.int"

docker_stack_internal_root_domain: "example.int"
docker_stack_external_root_domain: "example.com"

docker_stack_service_route_name: "{{ inventory_hostname_short }}"
#docker_stack_internal_domain: "{{ inventory_hostname }}.{{ docker_stack_internal_root_domain }}"
#docker_stack_external_domain: "{{ inventory_hostname }}.{{ docker_stack_external_root_domain }}"
docker_stack_internal_domain: "{{ docker_stack_service_route_name }}.{{ docker_stack_internal_root_domain }}"
docker_stack_external_domain: "{{ docker_stack_service_route_name }}.{{ docker_stack_external_root_domain }}"
#docker_stack_external_domain: "{{ docker_stack_external_root_domain }}"

docker_stack_enable_external_route: no

awx_orig_enabled: no
awx_orig_dockerhub_version: "17.1.0"
awx_orig_web_image: "awx"
awx_orig_task_image: "awx"
awx_orig_postgresql_version: "14.2"

awx_orig_docker_compose_dir: "{{ awx_inventory_dir }}/awxcompose-orig"
awx_orig_project_data_dir: "{{ awx_orig_docker_compose_dir }}/projects"
awx_orig_postgres_data_dir: "{{ awx_inventory_dir }}/pgdocker-orig"
awx_orig_host_port: 10080
awx_orig_host_port_ssl: 10443
awx_orig_memcached_port: 11211
awx_orig_pg_port: 6432
#awx_orig_pg_port: 7432
awx_orig_container_prefix: "awx_orig"
awx_orig_pg_password: awxpass

awx_orig_container_config_templates:
  - file: environment.sh
    mode: "0600"
  - file: credentials.py
    mode: "0600"
  - file: docker-compose.yml
    mode: "0600"
  - file: nginx.conf
    mode: "0600"
  - file: redis.conf
    mode: "0664"
  - file: settings.py
    mode: "0664"

awx_orig_web_volumes:
  - supervisor-socket:/var/run/supervisor
  - rsyslog-socket:/var/run/awx-rsyslog/
  - rsyslog-config:/var/lib/awx/rsyslog/
  - "{{ awx_docker_compose_dir }}/SECRET_KEY:/etc/tower/SECRET_KEY"
  - "{{ awx_docker_compose_dir }}/environment.sh:/etc/tower/conf.d/environment.sh"
  - "{{ awx_docker_compose_dir }}/credentials.py:/etc/tower/conf.d/credentials.py"
#      - "{{ awx_docker_compose_dir }}/settings.py:/etc/tower/conf.d/settings.py"
  - "{{ awx_docker_compose_dir }}/nginx.conf:/etc/nginx/nginx.conf:ro"
  - "{{ awx_docker_compose_dir }}/redis_socket:/var/run/redis/:rw"

docker_stack_awx_backend: "http://{{ docker_stack_internal_domain }}:{{ awx_host_port }}"
docker_stack_awx_orig_backend: "http://{{ docker_stack_internal_domain }}:{{ awx_orig_host_port }}"
docker_stack_nginx_backend: "https://nginx.example.int"

docker_stack_stepca_use_host_cacerts: no
docker_stack_stepca_enable_signed: no
docker_stack_stepca_ca_force_create: no

ca_domains_hosted:
  - "{{ docker_stack_internal_domain }}"

## SSL settings
docker_stack_internal_ssl_cert_dir: /usr/local/ssl/certs
docker_stack_internal_ssl_certkey_dir: /usr/local/ssl/private
#docker_stack_internal_ssl_certkey_dir: "/etc/ssl/private"
#docker_stack_internal_ssl_cert_dir: "/etc/ssl/crt"

#docker_stack_ssl_internal_cacert_file: "ca.{{ docker_stack_internal_root_domain }}.pem"
docker_stack_ssl_internal_root_cacert_file: "ca.{{ docker_stack_internal_root_domain }}.pem"
docker_stack_ssl_internal_cacert_file: "ca.{{ docker_stack_internal_domain }}.pem"

#docker_stack_ssl_internal_cert_file: "{{ hostname_name_full }}.pem"
docker_stack_ssl_internal_cert_file: "{{ docker_stack_internal_domain }}.chain.pem"
#docker_stack_ssl_internal_cert_file: "{{ docker_stack_internal_domain }}.pem"
docker_stack_ssl_internal_csr_file: "{{ docker_stack_internal_domain }}.csr"

#docker_stack_ssl_internal_privatekey_file: "{{ hostname_name_full }}-key.pem"
docker_stack_ssl_internal_privatekey_file: "{{ docker_stack_internal_domain }}-key.pem"

docker_stack_external_ssl_cert_dir: "{{ docker_stack_dir }}/shared/certs"
docker_stack_external_ssl_certkey_dir: "{{ docker_stack_dir }}/shared/certs"

docker_stack_ssl_external_cert_file: "{{ docker_stack_external_domain }}.pem"
docker_stack_ssl_external_privatekey_file: "{{ docker_stack_external_domain }}-key.pem"


docker_stack_cloudflare_email: "user@example.com"
docker_stack_cloudflare_apikey: "000000000000000000000000000000011111"

docker_stack_script_dir: "/opt/scripts"

docker_stack_wordpress_db_user: "wordpress"
docker_stack_wordpress_db_password: "passswOrd"

docker_stack_phpmyadmin_port: 8802


docker_stack_vmware_data_dir: /export/data/vmware

docker_stack_api_port: "2375"

docker_stack_app_config_dirs: {}

docker_stack_config_dirs: []

docker_stack_app_config_tpls: {}

docker_stack_app_config_files: {}

docker_stack_config_files: []

docker_stack_script_dirs:
  - path: "{{ docker_stack_script_dir }}"
    recurse: yes

docker_stack_scripts: []
#docker_stack_scripts:
#  - { src: 'files/mono_image/entrypoint.sh', dest: "{{ docker_stack_script_dir }}/mono-entrypoint.sh" }

docker_stack_service_templates:
  - src: 'compose.env.j2'
    dest: "{{ __docker_stack_appspecs__base_stack_dir }}/.env"
  - src: 'docker-compose.yml.j2'
    dest: "{{ __docker_stack_appspecs__base_stack_dir }}/docker-compose.yml"

docker_stack_proxy_service_templates:
  - src: "traefik/rules/proxy-services.yml.j2"
    dest: "{{ __docker_stack_appspecs__base_traefik_dir }}/rules/proxy-services.yml"

docker_stack_script_config_tpls: []
#  - { src: 'scripts/backups.cfg.j2', dest: "/root/.backups.cfg", mode: "0600" }
#  - { src: 'scripts/fwbackup.conf.j2', dest: "/root/.fwbackup.cfg", mode: "0600" }

docker_stack_email_from: "admin@example.com"
docker_stack_email_to: "admin@example.com"
docker_stack_smtp: "mail.example.int"

docker_stack_firewalld_enabled: yes

docker_stack_firewalld_services: []

docker_stack_firewalld_app_services: {}

docker_stack_firewalld_app_ports: {}

#overwrite_configs: yes
## used from setting up registry service instance
#docker_stack_registry_service_name: "registry"
docker_stack_registry_service_domain: "{{ docker_stack_internal_domain }}"

## used from running stack
docker_stack_registry_endpoint: "example.int:5000"
#docker_stack_registry_url: "https://{{ docker_stack_registry_endpoint }}/v2/"

docker_stack_registry_login: yes
docker_stack_registry_username: user
docker_stack_registry_password: password

docker_stack_service_group_configs_tpl: {}

docker_stack_config_tpls: []

docker_stack_container_configs: {}

######
## base docker stack configs
######

docker_stack_timezone: "America/New_York"

