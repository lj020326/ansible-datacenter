---

- name: "Set common os type"
  include_tasks: set-os-groups.yml

- name: "Set common machine type"
  include_tasks: set-machine-type.yml

- name: "Display important common variable information"
  debug:
    msg:
      ## BEGIN ansible special/magic variables
      ## ref: https://docs.ansible.com/ansible/latest/user_guide/playbooks_vars_facts.html#discovering-variables-facts-and-magic-variables
      - "ansible_run_tags={{ ansible_run_tags | d([]) }}"
      - "ansible_limit={{ ansible_limit | d('') }}"
      - "ansible_pkg_mgr={{ ansible_pkg_mgr | d('') }}"
      - "ansible_version={{ ansible_version | d('') }}"
      - "ansible_python_interpreter={{ ansible_python_interpreter | d('') }}"
      - "ansible_python_version={{ ansible_python_version | d('') }}"
      - "ansible_pip_interpreter={{ ansible_pip_interpreter | d('') }}"
      - "ansible_user={{ ansible_user }}"
      - "ansible_nodename={{ ansible_nodename | d('') }}"
      - "ansible_host={{ ansible_host }}"
      - "ansible_hostname={{ ansible_hostname | d('') }}"
      - "ansible_port={{ ansible_port | d('') }}"
      - "ansible_fqdn={{ ansible_fqdn | d('') }}"
      - "ansible_default_ipv4.address={{ ansible_default_ipv4.address | d(ansible_all_ipv4_addresses[0]) | d('') }}"
      - "ansible_connection={{ ansible_connection | d('') }}"
      - "ansible_virtualization_type={{ ansible_virtualization_type | d('') }}"
      - "ansible_virtualization_role={{ ansible_virtualization_role | d('') }}"
      - "ansible_system_vendor={{ ansible_system_vendor | d('') }}"
      - "ansible_product_name={{ ansible_product_name | d('') }}"
      - "ansible_winrm_transport={{ ansible_winrm_transport | d('') }}"
      - "ansible_winrm_scheme={{ ansible_winrm_scheme | d('') }}"
      - "ansible_winrm_server_cert_validation={{ ansible_winrm_server_cert_validation | d('') }}"
      - "ansible_os_family={{ ansible_os_family | d('') }}"
      - "ansible_distribution={{ ansible_distribution | d('') }}"
      - "ansible_distribution_release={{ ansible_distribution_release | d('') }}"
      - "ansible_distribution_major_version={{ ansible_distribution_major_version | d('') }}"
      - "ansible_distribution_version={{ ansible_distribution_version | d('') }}"
      - "inventory_hostname={{ inventory_hostname | d('') }}"
      - "inventory_hostname_short={{ inventory_hostname_short | d('') }}"
      ## BEGIN dynamically derived DC group_vars/host_vars
      - "dc_os_family={{ dc_os_family }}"
      - "dc_os_distribution={{ dc_os_distribution }}"
      - "dc_os_distribution_version={{ dc_os_distribution_version }}"
      - "dc_os_family_shortname={{ dc_os_family_shortname }}"
      - "dc_os_family_abbrev={{ dc_os_family_abbrev }}"
      - "dc_os_distribution={{ dc_os_distribution }}"
      - "dc_os_distribution_version={{ dc_os_distribution_version }}"
      - "dc_machine_type_group={{ dc_machine_type_group }}"
      - "dc_machine_type={{ dc_machine_type }}"
      - "os_python_interpreter={{ os_python_interpreter }}"
      - "container_user_name={{ container_user_name | d('') }}"
      - "container_user_uid={{ container_user_uid | d('') }}"
      - "container_user_gid={{ container_user_uid | d('') }}"

- name: "Display group_names - including derived dc_* groups"
  debug:
    var: group_names | d([])
