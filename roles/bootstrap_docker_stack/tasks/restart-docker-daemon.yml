---
- name: "Shut down docker stack"
  ansible.builtin.include_tasks: shutdown-docker-stack.yml

- name: "{{ __docker_stack__log_prefix__restart_daemon }} Restart docker service"
  ansible.builtin.service:
    name: docker
    state: restarted
  register: __service_result
  retries: 3
  delay: 10
  until: __service_result is not failed

- name: "{{ __docker_stack__log_prefix__restart_daemon }} Display __service_result"
  ansible.builtin.debug:
    var: __service_result
    verbosity: 1
