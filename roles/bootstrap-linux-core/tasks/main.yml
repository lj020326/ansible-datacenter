---

- include_vars: "{{ item }}"
  with_first_found:
    - "{{ ansible_distribution }}-{{ ansible_distribution_major_version}}.yml"
    - "{{ ansible_distribution }}.yml"
    - "{{ ansible_os_family }}.yml"
    - "default.yml"

- name: "Setup dns"
  when:
    - bootstrap_linux_setup_dns|d(True)|bool
    - ansible_virtualization_type!='docker'
  include_tasks: dns.yml
  tags: [ 'bootstrap-linux-dns' ]

#- name: Setup network
#  include_tasks: network.yml
#  when: bootstrap_linux__init_network|bool
#  tags: [ 'bootstrap-linux-network' ]

- name: "Setup environment"
  include_tasks: env.yml
  tags: [ 'bootstrap-linux-env' ]

- name: "Setup motd"
  include_tasks: motd.yml
  tags: [ 'bootstrap-motd' ]

- name: "Setup figurine"
  when:
    - bootstrap_linux_setup_figurine|d(True)|bool
    - ansible_virtualization_type!='docker'
  include_tasks: figurine.yml
  tags: [ 'bootstrap-figurine' ]

- name: "Setup host name"
  when:
    - bootstrap_linux_setup_hostname|d(True)|bool
    - ansible_virtualization_type!='docker'
  include_tasks: hostname.yml
  tags: [ 'bootstrap-linux-hostname' ]

- name: "Configure journald"
  when:
    - bootstrap_linux_setup_journald|d(True)|bool
    - ansible_virtualization_type!='docker'
  include_tasks: journald.yml
  tags: [ 'bootstrap-linux-journald' ]

- include_tasks: timezone.yml
  when:
    - bootstrap_linux_set_timezone|d(True)|bool
    - ansible_virtualization_type!='docker'
  tags: ['bootstrap-timezone']

- name: "Setup backup scripts"
  when: bootstrap_linux_setup_backup_scripts|d(False)|bool
  include_tasks: setup-backup-scripts.yml
  tags: [ 'bootstrap-backup-scripts' ]

