---

- include_vars: "{{ item }}"
  with_first_found:
    - "{{ ansible_distribution }}-{{ ansible_distribution_major_version}}.yml"
    - "{{ ansible_distribution }}.yml"
    - "{{ ansible_os_family }}.yml"
    - "default.yml"

- name: "Setup packages"
  include_tasks: packages.yml
  tags:
    - bootstrap-packages
    - common-packages

- name: "Setup dns"
  include_tasks: dns.yml
  tags: [ 'bootstrap-linux-dns' ]

#- name: Setup network
#  include_tasks: network.yml
#  when: common_config__init_network|bool
#  tags: [ 'bootstrap-linux-network' ]

- name: "Setup environment"
  include_tasks: env.yml
  tags: [ 'bootstrap-linux-env' ]

- name: "Setup motd"
  include_tasks: motd.yml
  tags: [ 'bootstrap-motd' ]

- name: "Setup figurine"
  include_tasks: figurine.yml
  tags: [ 'bootstrap-figurine' ]

- name: "Setup mounts"
  include_tasks: mounts.yml
  tags: [ 'bootstrap-linux-mounts' ]

- name: "Setup host name"
  include_tasks: hostname.yml
  tags: [ 'bootstrap-linux-hostname' ]

- name: "Configure logging"
  include_tasks: logging.yml
  tags: [ 'bootstrap-linux-logging' ]

- name: "Setup backup scripts"
  include_tasks: setup-backup-scripts.yml
  when: "'backup_server' in group_names"
  tags: [ 'bootstrap-backup-scripts' ]

## performed in separate role
# - name: "Setup users"
#   include_tasks: user.yml
#   tags: [ 'bootstrap-linux-users' ]

## performed in separate role
#- name: Setup firewall
#  include_tasks: firewall.yml
#  tags: [ 'bootstrap-linux-firewall' ]
