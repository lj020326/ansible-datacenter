---

- name: "Display key parameters for {{ role_name }}"
  block:
    - debug:
        var: bootstrap_linux_package_list
    - debug:
        var: bootstrap_linux_package_state
    - debug:
        var: bootstrap_linux_package_update_cache

- name: Show variables with 'bootstrap_linux_package_list__' in their names
  debug:
    msg: "{{ lookup('varnames', '^bootstrap_linux_package_list__', wantlist=True) }}"

- name: Initialize __bootstrap_linux_package_list with bootstrap_linux_package_list
  set_fact:
    __bootstrap_linux_package_list: "{{ bootstrap_linux_package_list|d([]) }}"

- name: Combine additive/role-specific lists from bootstrap_linux_package_list__* vars into merged list
  set_fact:
    __bootstrap_linux_package_list: "{{ __bootstrap_linux_package_list|d([]) + lookup('vars', item)|d([]) | sort | unique }}"
  loop: "{{ lookup('varnames','^bootstrap_linux_package_list__', wantlist=True) }}"

- name: display __bootstrap_linux_package_list
  debug:
    var: __bootstrap_linux_package_list

- name: "Init __bootstrap_linux_package_state_map"
  set_fact:
    __bootstrap_linux_package_map_present: []
    __bootstrap_linux_package_map_latest: []
    __bootstrap_linux_package_map_absent: []

- name: "Set __bootstrap_linux_package_list_present"
  when:
    - item.state=='present'
  set_fact:
    __bootstrap_linux_package_map_present: "{{ __bootstrap_linux_package_map_present | d([]) + [(item is mapping) | ternary( item.apt|d(item.name), item)] }}"
  loop: "{{ __bootstrap_linux_package_list }}"

- name: "Set __bootstrap_linux_package_list_latest"
  when: item.state=='latest'
  set_fact:
    __bootstrap_linux_package_map_latest: "{{ __bootstrap_linux_package_map_latest | d([]) + [(item is mapping) | ternary( item.apt|d(item.name), item)] }}"
  loop: "{{ __bootstrap_linux_package_list }}"

- name: "Set __bootstrap_linux_package_list_absent"
  when: item.state=='absent'
  set_fact:
    __bootstrap_linux_package_map_absent: "{{ __bootstrap_linux_package_map_absent | d([]) + [(item is mapping) | ternary( item.apt|d(item.name), item)] }}"
  loop: "{{ __bootstrap_linux_package_list }}"


- name: "Display bootstrap_linux_package_pip_list"
  block:
    - debug:
        var: bootstrap_linux_package_pip_list

- name: Show variables with 'bootstrap_linux_package_pip_list__' in their names
  debug:
    msg: "{{ lookup('varnames', '^bootstrap_linux_package_pip_list__', wantlist=True) }}"

- name: Initialize __bootstrap_linux_package_pip_list with bootstrap_linux_package_pip_list
  set_fact:
    __bootstrap_linux_package_pip_list: "{{ bootstrap_linux_package_pip_list|d([]) }}"

- name: Combine additive/role-specific lists from bootstrap_linux_package_pip_list__* vars into merged list
  set_fact:
    __bootstrap_linux_package_pip_list: "{{ __bootstrap_linux_package_pip_list|d([]) + lookup('vars', item)|d([]) | sort | unique }}"
  loop: "{{ lookup('varnames','^bootstrap_linux_package_pip_list__', wantlist=True) }}"

- name: display __bootstrap_linux_package_pip_list
  debug:
    var: __bootstrap_linux_package_pip_list


- name: "Display bootstrap_linux_package_snap_list"
  block:
    - debug:
        var: bootstrap_linux_package_snap_list

- name: Show variables with 'bootstrap_linux_package_snap_list__' in their names
  debug:
    msg: "{{ lookup('varnames', '^bootstrap_linux_package_snap_list__', wantlist=True) }}"

- name: Initialize __bootstrap_linux_package_snap_list with bootstrap_linux_package_snap_list
  set_fact:
    __bootstrap_linux_package_snap_list: "{{ bootstrap_linux_package_snap_list|d([]) }}"

- name: Combine additive/role-specific lists from bootstrap_linux_package_snap_list__* vars into merged list
  set_fact:
    __bootstrap_linux_package_snap_list: "{{ __bootstrap_linux_package_snap_list|d([]) + lookup('vars', item)|d([]) | sort | unique }}"
  loop: "{{ lookup('varnames','^bootstrap_linux_package_snap_list__', wantlist=True) }}"

- name: display __bootstrap_linux_package_snap_list
  debug:
    var: __bootstrap_linux_package_snap_list
