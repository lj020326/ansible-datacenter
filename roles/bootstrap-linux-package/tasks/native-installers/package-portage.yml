---

#- name: Portage
#  portage:
#    package: "{{ item.portage | default(item.name) }}"
#    state: "{{ item.state | default(bootstrap_linux_package_state) }}"
#    sync: "{{ bootstrap_linux_package_update_cache }}"
#  when: not item.portage_ignore|default('no')|bool
#  with_items: "{{ __bootstrap_linux_package_list }}"


- name: "Install present Portage packages"
  become: no
  when: __bootstrap_linux_package_list_present|d([])|length>0
  portage:
    package: "{{ __bootstrap_linux_package_list_present }}"
    state: "present"
    update_cache: "{{ bootstrap_linux_package_update_cache }}"

- name: "Install latest Portage packages"
  become: no
  when: __bootstrap_linux_package_list_latest|d([])|length>0
  portage:
    package: "{{ __bootstrap_linux_package_list_latest }}"
    state: "latest"
    update_cache: "{{ bootstrap_linux_package_update_cache }}"

- name: "Remove Portage packages"
  become: no
  when: __bootstrap_linux_package_list_latest|d([])|length>0
  portage:
    package: "{{ __bootstrap_linux_package_list_latest }}"
    state: "absent"
    update_cache: "{{ bootstrap_linux_package_update_cache }}"
