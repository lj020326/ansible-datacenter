---

- name: "Update yum repos"
  when:
    - bootstrap_linux_package_yum_repo_list|d([])|length>0
    - bootstrap_linux_package_update_cache|bool
  include_tasks: ../update-repo-yum.yml

#- name: Yum
#  when: not item.yum_ignore|default('no')|bool
#  yum:
#    name: "{{ item.yum | default(item.name) }}"
#    state: "{{ item.state | default(bootstrap_linux_package_state) }}"
#    update_cache: "{{ bootstrap_linux_package_update_cache }}"
#  with_items: "{{ __bootstrap_linux_package_list }}"

- name: "Install present Yum packages"
  when: __bootstrap_linux_package_list_present|d([])|length>0
  yum:
    name: "{{ __bootstrap_linux_package_list_present }}"
    state: "present"
    update_cache: "{{ bootstrap_linux_package_update_cache }}"

- name: "Install latest Yum packages"
  when: __bootstrap_linux_package_list_latest|d([])|length>0
  yum:
    name: "{{ __bootstrap_linux_package_list_latest }}"
    state: "latest"
    update_cache: "{{ bootstrap_linux_package_update_cache }}"

- name: "Remove Yum packages"
  when: __bootstrap_linux_package_list_absent|d([])|length>0
  yum:
    name: "{{ __bootstrap_linux_package_list_absent }}"
    state: "absent"
