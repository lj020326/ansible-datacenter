---

# WARNING: Workflow definitions can be complex. This function is not
# fully validated within this role and must be used with caution.

controller_workflow_templates:
  # - name: Name of Workflow Template
  #   organization: dettonville
  #   roles:
  #     execute:
  #       - LIST of teams or local users to receive execute access
  #     admin:
  #       - LIST of teams or local users to receive admin access
  #     approval:
  #       - LIST of teams or local users to receive approval access
  #   environments:
  #     - LIST of environments to receive workflow
  #     - (if omitted, deployed to all)
  #     - sandbox
  #   workflow_nodes:
  #     - identifier: unique name. Will be name shown in Visualizer
  #       unified_job_template:
  #         name: Name of job template
  #         organization:
  #           name: org name, used for template lookup (e.g. dettonville)
  #         type: job_template (only this type currently supported by role)
  #       related:
  #         # Nodes to run regardless of success/failure status
  #         always_nodes:
  #           - identifier: node identifier
  #         # Nodes to run if this node fails
  #         failure_nodes:
  #           - identifier: node identifier
  #         # Nodes to run if this node succeeds
  #         success_nodes:
  #           - identifier: node identifier
  #     - idenfitier:
  #       unified_job_template:
  #         name:
  #         organization:
  #           name:
  #       type: job_template
  #       related:
  #         always_nodes: []
  #         failure_nodes: []
  #         success_nodes: []

  - name: NTW - Akamai F5 Update Workflow
    organization: dettonville
    roles:
      execute:
        - SG - Ansible-Network
      admin:
      approval:
    environments:
      - sandbox
      - prod
    extra_vars:
      ansible_python_interpreter: python3
    workflow_nodes:
      - identifier: NTW - Update Akamai CIDRs in F5 Data Groups - s4
        unified_job_template:
          name: NTW - Update Akamai CIDRs in F5 Data Groups
          organization:
            name: dettonville
          type: job_template
        extra_data:
          f5_host: ltme10.s4.dettonville.int
          f5_port: 443
          f5_sync_group: ltme-s4-device-group
        related:
          always_nodes: []
          failure_nodes: []
          success_nodes:
            - identifier: NTW - Update Akamai CIDRs in F5 Data Groups - s1
      - identifier: NTW - Update Akamai CIDRs in F5 Data Groups - s1
        unified_job_template:
          name: NTW - Update Akamai CIDRs in F5 Data Groups
          organization:
            name: dettonville
          type: job_template
        extra_data:
          f5_host: ltme10.s1.dettonville.int
          f5_port: 443
          f5_sync_group: ltme-s1-device-group
        related:
          always_nodes: []
          failure_nodes: []
          success_nodes:
            - identifier: NTW - Acknowledge Akamai CIDRs in F5 Data Groups
      - identifier: NTW - Acknowledge Akamai CIDRs in F5 Data Groups
        unified_job_template:
          name: NTW - Acknowledge Akamai CIDRs in F5 Data Groups
          organization:
            name: dettonville
          type: job_template
        related:
          always_nodes: []
          failure_nodes: []
          success_nodes: []
