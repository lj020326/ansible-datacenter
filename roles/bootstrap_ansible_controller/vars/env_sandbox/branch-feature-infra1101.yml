---

__scm_branch_abbrev__infra1101: "feature/INFRA-1101"
__scm_branch__infra1101: "feature/INFRA-1101-dettonville.git_inventory-module-enhancements"

#############
## Branch project config
#############
controller_projects__branch_infra1101:

  - name: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    description:
    organization: dettonville
    scm_type: git
    scm_branch: "{{ __scm_branch__infra1101 }}"
    scm_url: ssh://git@gitea.admin.dettonville.int:2222/infra/aap-inventory.git
    credential: dettonville - Ansible - git
    default_environment: Automation Hub Default execution environment
    scm_update_on_launch: true
    scm_clean: true
    roles:
      admin:
      use:
      update:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "AAP common - {{ __scm_branch_abbrev__infra1101 }}"
    description: aap_common repository
    organization: dettonville
    scm_type: git
    scm_branch: "{{ __scm_branch__infra1101 }}"
    scm_url: ssh://git@gitea.admin.dettonville.int:2222/infra/aap-common.git
    credential: "{{ _default_git_credential }}"
    default_environment: Automation Hub Ansible Engine 2.9 execution environment
    scm_update_on_launch: true
    scm_clean: true
    allow_override: "{{ __allow_scm_branch_override }}"
    roles:
      admin:
      use:

#############
## Branch inventory config
#############
controller_inventories__branch_infra1101:

  - name: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    description:
    organization: dettonville
    sources:
      - name: Bitbucket
        description: Inventory from repository
        update_on_launch: true
        source: scm
        source_project: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
        source_path: "{{ bootstrap_ansible_controller__env_specific_vars[controller_env]['dettonville_inventory_source_path'] }}"
        overwrite: true
        overwrite_vars: true
    roles:
      use:
        - SG - Ansible-Admin
        - SG - Ansible-BIDE
        - SG - Ansible-ClientServices
        - SG - Ansible-Database
        - SG - Ansible-Digital
        - SG - Ansible-DWP
        - SG - Ansible-East
        - SG - Ansible-Linux
        - SG - Ansible-Midwa
        - SG - Ansible-Network
        - SG - Ansible-Openshift
        - SG - Ansible-Rely
        - SG - Ansible-TRP
        - SG - Ansible-Windows
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

#############
## Branch job template config
#############
controller_job_templates__branch_infra1101:

  #################
  ## DCC TEST templates
  #################
  - name: "DCC TEST PLAYBOOKS - test-connectivity"
    description: Connectivity Test Playbook (runs dettonville.utils.ping_test only) - test-connectivity mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: tests/test-connectivity.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
    ask_limit_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    become_enabled: true
    roles:
      admin:
      execute:

  #################
  ## dettonville.utils COLLECTION MODULE TEST templates
  #################
  - name: "dettonville - tests - dettonville.utils - run-module-tests - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - Run all dettonville.utils module tests mte:5
    organization: dettonville
    inventory: dettonville inventory
    project: AAP common
    playbook: collections/ansible_collections/dettonville/utils/tests/integration/targets/run-module-tests.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
    ask_tags_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    survey_enabled: true
    survey_spec:
      name: ""
      description: ""
      spec:
        - question_name: Test Case Id List
          question_description: Comma-separated list of test cases e.g. '01,07,10'
          required: false
          type: text
          variable: test_case_id_list_string
          min: 0
          max: 1024
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  #################
  ## dettonville.git_inventory COLLECTION MODULE TEST templates
  #################
  - name: "dettonville - tests - dettonville.git_inventory - run-module-tests - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - Run all dettonville.git_inventory module tests mte:5
    organization: dettonville
    inventory: dettonville inventory
    project: AAP common
    playbook: collections/ansible_collections/dettonville/git_inventory/tests/integration/targets/run-module-tests.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
    ask_tags_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    survey_enabled: true
    survey_spec:
      name: ""
      description: ""
      spec:
        - question_name: Test Case Id List
          question_description: Comma-separated list of test cases e.g. '01,07,10'
          required: false
          type: text
          variable: test_case_id_list_string
          min: 0
          max: 1024
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "dettonville - tests - dettonville.git_inventory - test-aap-inventory-update-groups - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - test-aap-inventory-update-groups mte:5
    organization: dettonville
    inventory: dettonville inventory
    project: AAP common
    playbook: tests/test-aap-inventory-update-groups.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - AAP Bitbucket Push SSH Key
    ask_limit_on_launch: false
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"


  #################
  ## dettonville.cyberark COLLECTION job templates
  #################
  - name: "dettonville - site - run_tag => 'bootstrap-platform-accounts' - {{ __scm_branch_abbrev__infra1101 }}"
    description: Bootstrap Cyberark Platform Accounts mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: site.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    job_tags: bootstrap-platform-accounts
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    limit: testgroup_cyberark_platforms
    ask_limit_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "dettonville - bootstrap-platform-accounts - {{ __scm_branch_abbrev__infra1101 }}"
    description: Bootstrap Cyberark Platform Accounts mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: bootstrap-cyberark-platform-accounts.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    limit: testgroup_cyberark_platforms
    ask_limit_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  #################
  ## dettonville.cyberark COLLECTION ROLE/MODULE TEST templates
  #################
  - name: "dettonville - tests - bootstrap-platform-accounts - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - Bootstrap Cyberark Platform Accounts mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: tests/bootstrap-cyberark-platform-accounts.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    limit: testgroup_cyberark_platforms
    ask_limit_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "dettonville - tests - dettonville.cyberark - test-safe-create-using-svc-user - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - test-safe-create-using-svc-user mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: tests/test-safe-create-using-svc-user.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    ask_limit_on_launch: false
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "dettonville - tests - cyberark.clear-all-platform-test-accounts [Cyberark PROD vault] - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - Clear all cyberark platform test accounts mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: collections/ansible_collections/dettonville/cyberark/tests/integration/targets/clear-all-platform-test-accounts.PROD.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    limit: testgroup_cyberark_platforms
    ask_limit_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "dettonville - tests - dettonville.cyberark - run-role-tests [Cyberark TEST vault] - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - Run dettonville.cyberark.platform_account role tests mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: collections/ansible_collections/dettonville/cyberark/tests/integration/targets/run-role-tests.TEST.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    ask_tags_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    survey_enabled: true
    survey_spec:
      name: ""
      description: ""
      spec:
        - question_name: Test Case Id List
          question_description: Comma-separated list of test cases e.g. '01,07,10'
          required: false
          type: text
          variable: test_case_id_list_string
          min: 0
          max: 1024
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "dettonville - tests - dettonville.cyberark - run-role-tests [Cyberark PROD vault] - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - Run dettonville.cyberark.platform_account role tests mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: collections/ansible_collections/dettonville/cyberark/tests/integration/targets/run-role-tests.PROD.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    ask_tags_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    survey_enabled: true
    survey_spec:
      name: ""
      description: ""
      spec:
        - question_name: Test Case Id List
          question_description: Comma-separated list of test cases e.g. '01,07,10'
          required: false
          type: text
          variable: test_case_id_list_string
          min: 0
          max: 1024
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "dettonville - tests - dettonville.cyberark - run-module-tests [Cyberark TEST vault] - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - Run all dettonville.cyberark module tests mte:5
    organization: dettonville
    inventory: dettonville inventory
    project: AAP common
    playbook: collections/ansible_collections/dettonville/cyberark/tests/integration/targets/run-module-tests.TEST.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    ask_tags_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    survey_enabled: true
    survey_spec:
      name: ""
      description: ""
      spec:
        - question_name: Test Case Id List
          question_description: Comma-separated list of test cases e.g. '01,07,10'
          required: false
          type: text
          variable: test_case_id_list_string
          min: 0
          max: 1024
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  - name: "dettonville - tests - dettonville.cyberark - run-module-tests [Cyberark PROD vault] - {{ __scm_branch_abbrev__infra1101 }}"
    description: Integration Test - Run all dettonville.cyberark module tests mte:5
    organization: dettonville
    inventory: dettonville inventory
    project: AAP common
    playbook: collections/ansible_collections/dettonville/cyberark/tests/integration/targets/run-module-tests.PROD.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    ask_tags_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    survey_enabled: true
    survey_spec:
      name: ""
      description: ""
      spec:
        - question_name: Test Case Id List
          question_description: Comma-separated list of test cases e.g. '01,07,10'
          required: false
          type: text
          variable: test_case_id_list_string
          min: 0
          max: 1024
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"

  #################
  ## DCC_COMMON SITE.YML templates
  #################
  - name: "dettonville - site - run_tag => 'display-common-vars' - {{ __scm_branch_abbrev__infra1101 }}"
    description: Display hostvars mte:5
    organization: dettonville
    inventory: "dettonville inventory - {{ __scm_branch_abbrev__infra1101 }}"
    project: AAP common
    playbook: site.yml
    scm_branch: "{{ __scm_branch__infra1101 }}"
    job_tags: display-common-vars
    credentials:
      - AAP - Vault
      - dettonville - cyberark credential Test Ansible
    limit: testgroup
    ask_limit_on_launch: true
    ask_variables_on_launch: false
    ask_verbosity_on_launch: true
    become_enabled: true
    roles:
      admin:
      execute:
    environments: "{{ __bootstrap_ansible_controller__test_environments }}"
