---
- name: bootstrap_linux_systemd | Set facts about time and date settings
  ansible.builtin.set_fact:
    systemd_timedatectl_timezone:
      "{{ hostvars[inventory_hostname]['bootstrap_linux_systemd_timesyncd'] |
      community.general.json_query('[].timezone') }}"
    systemd_timedatectl_timesyncd:
      "{{ hostvars[inventory_hostname]['bootstrap_linux_systemd_timesyncd'] |
      community.general.json_query('[].timesyncd[]') }}"
- name: bootstrap_linux_systemd | Set timezone
  community.general.timezone:
    name: "{{ vars['bootstrap_linux_systemd_timedatectl_timezone'] | join() }}"
  when:
    - "vars['bootstrap_linux_systemd_timedatectl_timezone'] != []"
