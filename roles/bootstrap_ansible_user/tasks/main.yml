---

- name: Display bootstrap_ansible_user__os_local_admin_user
  ansible.builtin.debug:
    var: bootstrap_ansible_user__os_local_admin_user

- name: Display ansible_user
  ansible.builtin.debug:
    var: ansible_user

#- name: "Add to sudoers"
##  no_log: true
#  ansible.builtin.copy:
#    dest: /etc/sudoers.d/{{ ansible_user }}
#    mode: "0644"
#    content: |
#      {{ ansible_user }}  ALL=(ALL) ALL
#      {{ ansible_user }}  ALL=(ALL) NOPASSWD: ALL
#      {{ ansible_user }}  ALL=(root) NOPASSWD:/usr/bin/supervisorctl
#      Defaults !requiretty
#      #

- name: Bootstrap linux ansible user
  ansible.builtin.include_role:
    name: bootstrap_linux_user
  vars:
#    ansible_python_interpreter: "{{ bootstrap_ansible_user__os_python_interpreter }}"
    ansible_ssh_user: "{{ bootstrap_ansible_user__os_local_admin_user }}"
    ansible_remote_user: "{{ bootstrap_ansible_user__os_local_admin_user }}"
    ansible_user: "{{ bootstrap_ansible_user__os_local_admin_user }}"
    ansible_password: "{{ bootstrap_ansible_user__os_local_admin_password | d(omit) }}"
    ansible_become_password: "{{ bootstrap_ansible_user__os_local_admin_password | d(omit) }}"
#    ansible_ssh_common_args: |
#      -o StrictHostKeyChecking=no \
#      -o UserKnownHostsFile=/dev/null \
#      -o PreferredAuthentications=password \
#      -o PubkeyAuthentication=no
#    ansible_ssh_common_args: '-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
    bootstrap_linux_user__list:
      - "{{ bootstrap_ansible_user__ansible_user }}"

- name: Bootstrap ansible venv
#  vars:
#    ansible_python_interpreter: "{{ os_python_interpreter }}"
  ansible.builtin.include_role:
    name: bootstrap_pip
