---

- name: Display project template info
  debug:
    var: tower_project_template

- name: Create a Job Template
  tower_job_template:
    name: "{{ item.1.name }}"
    description: "{{ item.1.description | d(omit) }}"
    project: "{{ item.1.project }}"
    job_type: "{{ item.1.job_type | d(omit) }}"
    allow_simultaneous: "{{ item.1.allow_simultaneous | d(omit) }}"
    ask_credential_on_launch: "{{ item.1.ask_credential_on_launch | d(omit) }}"
    ask_diff_mode_on_launch: "{{ item.1.ask_diff_mode_on_launch | d(omit) }}"
    ask_inventory_on_launch: "{{ item.1.ask_inventory_on_launch | d(omit) }}"
    ask_job_type_on_launch: "{{ item.1.ask_job_type_on_launch | d(omit) }}"
    ask_limit_on_launch: "{{ item.1.ask_limit_on_launch | d(omit) }}"
    ask_scm_branch_on_launch: "{{ item.1.ask_scm_branch_on_launch | d(omit) }}"
    ask_skip_tags_on_launch: "{{ item.1.ask_skip_tags_on_launch | d(omit) }}"
    ask_tags_on_launch: "{{ item.1.ask_tags_on_launch | d(omit) }}"
    ask_variables_on_launch: "{{ item.1.ask_variables_on_launch | d(omit) }}"
    ask_extra_vars: "{{ item.1.ask_extra_vars | d(omit) }}"
    ask_verbosity_on_launch: "{{ item.1.ask_verbosity_on_launch | d(omit) }}"
    become_enabled: "{{ item.1.become_enabled | d(omit) }}"
    diff_mode: "{{ item.1.diff_mode | d(omit) }}"
    execution_environment: "{{ item.1.execution_environment | d(omit) }}"
    extra_vars: "{{ item.1.extra_vars | d(omit) }}"
    force_handlers: "{{ item.1.force_handlers | d(omit) }}"
    forks: "{{ item.1.forks | d(omit) }}"
    host_config_key: "{{ item.1.host_config_key | d(omit) }}"
    instance_groups: "{{ item.1.instance_groups | d(omit) }}"
    instance_groups: "{{ item.1.instance_groups | d(omit) }}"
    inventory: "{{ item.1.inventory | d(omit) }}"
    job_slice_count: "{{ item.1.job_slice_count | d(omit) }}"
    job_tags: "{{ item.1.job_tags | d(omit) }}"
    job_type: "{{ item.1.job_type | d(omit) }}"
    labels: "{{ item.1.labels | d(omit) }}"
    limit: "{{ item.1.limit | d(omit) }}"
    notification_templates_error: "{{ item.1.notification_templates_error | d(omit) }}"
    notification_templates_started: "{{ item.1.notification_templates_started | d(omit) }}"
    notification_templates_success: "{{ item.1.notification_templates_success | d(omit) }}"
    organization: "{{ item.0.name }}"
    playbook: "{{ item.1.playbook | d(omit) }}"
    scm_branch: "{{ item.1.scm_branch | d(omit) }}"
    skip_tags: "{{ item.1.skip_tags | d(omit) }}"
    start_at_task: "{{ item.1.start_at_task | d(omit) }}"
    survey_enabled: "{{ item.1.survey_enabled | d(omit) }}"
    survey_spec: "{{ item.1.survey_spec | d(omit) }}"
    timeout: "{{ item.1.timeout | d(omit) }}"
    use_fact_cache: "{{ item.1.use_fact_cache | d(omit) }}"
    vault_credential: "{{ item.1.vault_credential | d(omit) }}"
    verbosity: "{{ item.1.verbosity | d(omit) }}"
    webhook_credential: "{{ item.1.webhook_credential | d(omit) }}"
    webhook_service: "{{ item.1.webhook_service | d(omit) }}"
    state: "{{ item.1.state | d(omit) }}"
  loop: "{{ tower_project_template | subelements('item.1.templates', { 'skip_missing': true }) }}"
  loop_control:
    label: "project:[{{ item.0.name }}] => template:[{{ item.1.name }}]"

