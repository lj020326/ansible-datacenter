---
- name: restart aibrix gateway
  kubernetes.core.k8s:
    state: present
    definition:
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        name: aibrix-gateway
        namespace: aibrix-system
        annotations:
          deployment.kubernetes.io/revision: "{{ ansible_facts['date_time']['epoch'] }}"
    wait: true

- name: restart aibrix runtime
  kubernetes.core.k8s:
    state: present
    definition:
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        name: aibrix-runtime
        namespace: aibrix-system
        annotations:
          deployment.kubernetes.io/revision: "{{ ansible_facts['date_time']['epoch'] }}"
    wait: true
