---
- name: Set derived resource component variables
  ansible.builtin.set_fact:
    tower_execution_environments: "{{ bootstrap_awx_resources__config.execution_environments|d([]) }}"
    tower_organizations: "{{ bootstrap_awx_resources__config.organizations|d([]) }}"
    tower_credentials: "{{ bootstrap_awx_resources__config.credentials|d([]) }}"
    tower_inventories: "{{ bootstrap_awx_resources__config.inventories|d([]) }}"
    tower_projects: "{{ bootstrap_awx_resources__config.projects|d([]) }}"
    tower_templates: "{{ bootstrap_awx_resources__config.job_templates|d([]) }}"
    tower_teams: "{{ bootstrap_awx_resources__config.teams|d([]) }}"
    tower_roles: "{{ bootstrap_awx_resources__config.roles|d([]) }}"
    tower_saml_team_org_maps: "{{ bootstrap_awx_resources__config.settings.saml_team_org_maps|d([]) }}"

- name: Display tower organizations action
  ansible.builtin.debug:
    var: bootstrap_awx_resources__state

- name: Display bootstrap_awx_resources__config
  ansible.builtin.debug:
    var: bootstrap_awx_resources__config

## defaults to creating resources
- name: Run create-tower-config.yml
  when: bootstrap_awx_resources__state=='present'
  ansible.builtin.include_tasks: create-tower-config.yml

- name: Run remove-tower-config.yml
  when: bootstrap_awx_resources__state=='absent'
  ansible.builtin.include_tasks: remove-tower-config.yml
