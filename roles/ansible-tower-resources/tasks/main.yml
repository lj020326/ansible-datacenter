---

- set_fact:
    tower_organizations: "{{ tower_resources.organizations|d([]) }}"
    tower_credentials: "{{ tower_resources.credentials|d([]) }}"
    tower_inventories: "{{ tower_resources.inventories|d([]) }}"
    tower_projects: "{{ tower_resources.projects|d([]) }}"
    tower_templates: "{{ tower_resources.job_templates|d([]) }}"
    tower_teams: "{{ tower_resources.teams|d([]) }}"
    tower_roles: "{{ tower_resources.roles|d([]) }}"

- name: Display tower organizations action
  debug:
    var: tower_resource_state

- name: Display tower_resources
  debug:
    var: tower_resources

## defaults to bootstrapping orgs
- name:
  when: tower_resource_state=='present'
  include_tasks: "create-tower-config.yml"

- name:
  when: tower_resource_state=='absent'
  include_tasks: "remove-tower-config.yml"
