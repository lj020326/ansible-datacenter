---

- name: "TEST add_host_to_repo | Export test dicts"
  hosts: localhost
  vars:
    output_file: "/tmp/file1.csv"
    test_list:
      - { key1: "value11", key2: "value12", key3: "value13", key4: "value14" }
      - { key1: "value21", key2: "value22", key3: "value23", key4: "value24" }
      - { key1: "value31", key2: "value32", key3: "value33", key4: "value34" }
  tasks:

    - name: "TEST add_host_to_repo | Export test_list dicts to {{ output_file }}"
      add_host_to_repo:
        file: "{{ output_file }}"
        format: "csv"
        host_list: "{{ test_list }}"
      register: add_host_to_repo_result

    - name: Display add_host_to_repo_result
      debug:
        var: add_host_to_repo_result
