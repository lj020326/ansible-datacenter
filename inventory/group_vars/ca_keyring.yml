---

## COALESCE global cert-auth (ca) vars to role specific bootstrap_keyring vars
bootstrap_keyring_ca_init: "{{ ca_init|d(yes) }}"
bootstrap_keyring_ca_certify_nodes: "{{ ca_certify_nodes|d(yes) }}"
bootstrap_keyring_ca_certify_routes: "{{ ca_certify_routes|d(yes) }}"
bootstrap_keyring_ca_fetch_certs: "{{ ca_fetch_certs|d(yes) }}"
bootstrap_keyring_ca_force_create: "{{ ca_force_create|d(no) }}"
bootstrap_keyring_ca_force_certify_nodes: "{{ ca_force_certify_nodes|d(no) }}"
bootstrap_keyring_ca_force_distribute_nodes: "{{ ca_force_distribute_nodes|d(no) }}"

bootstrap_keyring_trust_ca_update_trust_cmd: "{{ trust_ca_update_trust_cmd | d('update-ca-trust extract') }}"
bootstrap_keyring_trust_ca_cacert_dir: "{{ trust_ca_cacert_dir | d('/etc/pki/ca-trust/source/anchors') }}"

bootstrap_keyring_cacerts_base_dir: "{{ keyring_cacerts_base_dir }}"

bootstrap_keyring_pki_key_dir: "{{ pki_key_dir }}"

bootstrap_keyring_ca_root_cn: "{{ ca_root_cn }}"

bootstrap_keyring_pki_caroot_cert: "{{ pki_caroot_cert }}"

bootstrap_keyring_pki_caroot_key: "{{ pki_caroot_key }}"

bootstrap_keyring_ca_local_cert_dir: "{{ ca_local_cert_dir }}"
bootstrap_keyring_ca_local_key_dir: "{{ ca_local_key_dir }}"

bootstrap_keyring_ca_java_keystore_enabled: "{{ ca_java_keystore_enabled | d(yes) }}"
bootstrap_keyring_ca_java_keystore_pass: "{{ ca_java_keystore_pass | d('changeit') }}"

bootstrap_keyring_trust_ca_cert_extension: "{{ trust_ca_cert_extension }}"

bootstrap_keyring_admin_user: "{{ ansible_local_user }}"

bootstrap_keyring_ca_keyring_base_dir: "{{ ca_keyring_base_dir }}"

bootstrap_keyring_ca_keyring_certs_dir: "{{ bootstrap_keyring_ca_keyring_base_dir }}/certs"
bootstrap_keyring_ca_keyring_keys_dir: "{{ bootstrap_keyring_ca_keyring_base_dir }}/keys"

bootstrap_keyring_ca_domains_hosted: "{{ ca_domains_hosted }}"

bootstrap_keyring_ca_root: "{{ ca_root }}"

bootstrap_keyring_ca_root_cert: "{{ ca_root_cn }}.pem"
bootstrap_keyring_ca_root_key: "{{ ca_root_cn }}-key.pem"

bootstrap_keyring_ca_intermediate_certs_list: "{{ ca_intermediate_certs_list }}"

bootstrap_keyring_ca_service_routes_list: "{{ ca_service_routes_list }}"

bootstrap_keyring_ca_key_spec: "{{ ca_key_spec }}"


## ref: https://github.com/cloudflare/cfssl/releases/
## ref: https://github.com/githubixx/ansible-role-cfssl
#cfssl_version: 1.3.4
#cfssl_version: 1.4.0
cfssl_version: 1.4.1

ca_distribute_certs: yes
debug: yes

ca_root_cn: "ca-root"

ca_keyring_repo_email: "{{ ca_root.email }}"
