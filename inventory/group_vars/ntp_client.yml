---

## NTP configs
## ref: ./../../roles/bootstrap-ntp/README.md
bootstrap_ntp_timezone: America/New_York

bootstrap_ntp_tinker_panic: yes

bootstrap_ntp_servers_yaml: |
  [
    {% if ansible_default_ipv4.address|d(ansible_all_ipv4_addresses[0]) is defined %}
    {% if groups['ntp_server'] is defined %}
    {% for server in groups['ntp_server'] %}
    {% for network in hostvars[server].bootstrap_ntp_allow_networks|d([]) %}
    {% if ansible_default_ipv4.address|d(ansible_all_ipv4_addresses[0]) | ansible.utils.ipaddr('network') %}
    "{{ hostvars[server].ansible_host }}",
    {% endif %}
    {% endfor %}
    {% endfor %}
    {% endif %}
    {% endif %}
  ]

bootstrap_ntp_servers: "{{ bootstrap_ntp_servers_yaml | from_yaml }}"

bootstrap_ntp_cmdport_disabled: yes

## used for variable-to-inventory trace/debug
bootstrap_ntp_var_source: linux_middleware_playbooks/group_vars/ntp_client.yml
