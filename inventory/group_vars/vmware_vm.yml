---

ansible_host: "{{ netbase__hostname }}"

deploy_vm__tags_init_all:
  - { tag_name: "vm_pre_bootstrap", tag_description: "New VM prior to OS bootstrap play" }
  - { tag_name: "vm_new", tag_description: "New VM" }
  - { tag_name: "vm_new_linux", tag_description: "New Linux VM" }
  - { tag_name: "vm_new_windows", tag_description: "New Windows VM" }

bootstrap_linux_install_vmware_tools: yes

vmware_vm_network_type: dhcp
vmware_vm_services: []
vmware_new_vm_group_names:
  - "vmware_new_vm_{{ vmware_vm_os_flavor }}"
  - "deploy_vm_ip_{{ vmware_vm_network_type }}"
  - "{{ vmware_vm_services }}"

vmware_new_vm_tags:
  - "vm_pre_bootstrap"
  - "vm_new"
  - "vm_new_{{ vmware_vm_os_flavor }}"

deploy_vm_group_names: "{{ vmware_new_vm_group_names }}"

vmware_vm_gateway_ipv4: "{{ gateway_ipv4 }}"
vmware_vm_gateway_ipv4_netmask: "{{ gateway_ipv4_netmask }}"

vmware_vm_host_domain: "dettonville.int"
vmware_vm_host: "esx00.{{ vmware_vm_host_domain }}"

vmware_vm_guest_domain: "{{ internal_domain }}"

#vmware_vm_nameservers:
#  - "{{ vmware_vm_gateway_ipv4 }}"

#vmware_vm_dns_nameservers: "{{ dns_nameservers }}"

vmware_vm_nameservers:
  addresses:
    - "{{ vmware_vm_gateway_ipv4 }}"
  search:
    - "{{ vmware_vm_guest_domain }}"
    - "{{ vmware_vm_host_domain }}"

#vmware_vm_datacenter: "johnsondc"
vmware_vm_datacenter: "dettonville-dc-01"
vmware_vm_cluster: "Management"

#vmware_vm_folder: /DC1/vm/
#vmware_vm_folder: /johnsondc/vm/
#vmware_vm_folder: .
vmware_vm_folder: "/{{ vmware_vm_datacenter }}/vm/vm"

#vmware_vm_datastore: "esx02_ds1"
#vmware_vm_datastore: "datastore1"
vmware_vm_datastore: "nfs_ds1"
vmware_vm_datastore_folder: vm

vmware_vm_image_id: centos8
vmware_vm_guest_id: centos64Guest
vmware_vm_os_flavor: linux

vmware_vm_name: "{{ inventory_hostname_short }}"

##vmware_vm_mac_address: "11:01:aa:91:65:5b"
#vmware_vm_mac_address: "00:50:56:00:00:00"

#vmware_vm_controller_type: "lsilogic"
vmware_vm_controller_type: "paravirtual"
vmware_vm_controller_number: 1
vmware_vm_unit_number: 0

vmware_vm_network_name: "VM Network"
#vmware_vm_network_device_type: e1000
#vmware_vm_network_device_type: vmxnet3
vmware_vm_network_start_connected: yes
vmware_vm_network_connected: yes

#vmware_vm_host: "esx00.dettonville.int"

vmware_vm_memory_mb_default: 1024
vmware_vm_num_cpus_default: 1
vmware_vm_disk_size_gb_default: 20
vmware_vm_disk_type: "thin"

vmware_vm_hardware:
  memory_mb: "{{ vmware_vm_memory_mb }}"
  num_cpus: "{{ vmware_vm_num_cpus }}"
  scsi: "{{ vmware_vm_controller_type | d(omit) }}"

vmware_vm_disks:
  - size_gb: "{{ vmware_vm_disk_size_gb }}"
    type: "{{ vmware_vm_disk_type }}"
    datastore: "{{ vmware_vm_datastore }}"
#    controller_type: "{{ vmware_vm_controller_type | d(omit) }}"
#    controller_number: "{{ vmware_vm_controller_number | d(omit) }}"
#    unit_number: "{{ vmware_vm_unit_number | d(omit) }}"

vmware_vm_networks:
  - name: "{{ vmware_vm_network_name }}"
#    device_type: "{{ vmware_vm_network_device_type | d(omit) }}"
#    type: "{{ vmware_vm_network_type | d(omit) }}"
#    start_connected: "{{ vmware_vm_network_start_connected | d(True) }}"
#    connected: "{{ vmware_vm_network_connected | d(True) }}"
#    mac: "{{ vmware_vm_mac_address | d(omit) }}"
#    ip: "{{ vmware_vm_network_ip | d(omit) }}"
#    netmask: "{{ vmware_vm_network_mask | d(omit) }}"


deploy_vm__vmware_vm_config:
  name: "{{ vmware_vm_name }}"
  template_id: "{{ vmware_vm_image_id }}"
  os_flavor: "{{ vmware_vm_os_flavor }}"
  guest_id: "{{ vmware_vm_guest_id }}"
  guest_domain: "{{ vmware_vm_guest_domain }}"
  datacenter: "{{ vmware_vm_datacenter}}"
  cluster: "{{ vmware_vm_cluster }}"
  host: "{{ vmware_vm_host }}"
  folder: "{{ vmware_vm_folder }}"
  gateway_ipv4: "{{ vmware_vm_gateway_ipv4 }}"
  nameservers: "{{ vmware_vm_nameservers }}"
  datastore: "{{ vmware_vm_datastore }}"
  datastore_folder: "{{ vmware_vm_datastore_folder }}"
  services: "{{ vmware_vm_services }}"
  hardware: "{{ vmware_vm_hardware }}"
  controller_type: "{{ vmware_vm_controller_type }}"
  disks: "{{ vmware_vm_disks }}"
  networks: "{{ vmware_vm_networks }}"
  deploy_groups: "{{ vmware_vm_services|d([]) + vmware_new_vm_group_names|d([]) | flatten }}"
  deploy_vm_tags: "{{ vmware_new_vm_tags }}"
  dns_suffix: "{{ vmware_vm_guest_domain }}"
#  dns_servers: "{{ vmware_vm_dns_nameservers }}"
#  netmask: "{{ vmware_vm_gateway_ipv4_netmask | d(omit) }}"

