---

deploy_vm__tags_init_all:
  - { tag_name: "vm_pre_bootstrap", tag_description: "New VM prior to OS bootstrap play" }
  - { tag_name: "vm_new", tag_description: "New VM" }
  - { tag_name: "vm_new_linux", tag_description: "New Linux VM" }
  - { tag_name: "vm_new_windows", tag_description: "New Windows VM" }

vmware_node_services_default: []
vmware_new_vm_group_names:
  - "vmware_new_vm_{{ vmware_vm_os_flavor }}"
  - "deploy_vm_ip_{{ vmware_vm_network_type | d(vmware_vm_network_type_default) }}"
  - "{{ vmware_node_services | d(vmware_node_services_default) }}"

vmware_new_vm_tags:
  - "vm_pre_bootstrap"
  - "vm_new"
  - "vm_new_{{ vmware_vm_os_flavor }}"

deploy_vm_group_names: "{{ vmware_new_vm_group_names }}"

vm_controller_default: "vmware"

vmware_vm_gateway_ipv4_default: "{{ gateway_ip4 }}"
vmware_vm_gateway_ipv4_netmask_default: "{{ gateway_ipv4_netmask }}"

vmware_vm_guest_domain: "dettonville.int"
vmware_vm_host_default: "esx00.{{ vmware_vm_guest_domain }}"

#vmware_vm_datacenter_default: "johnsondc"
vmware_vm_datacenter_default: "dettonville-dc-01"
vmware_vm_cluster_default: "Management"

vmware_vm_image_id_default: centos8
vmware_vm_guest_id_default: centos64Guest
vmware_vm_os_flavor_default: linux

vmware_vm_name_default: "{{ inventory_hostname_short }}"

##vmware_vm_mac_address_default: "11:01:aa:91:65:5b"
#vmware_vm_mac_address_default: "00:50:56:00:00:00"

#vmware_vm_folder_default: /DC1/vm/
#vmware_vm_folder_default: /johnsondc/vm/
#vmware_vm_folder_default: .
vmware_vm_folder_default: "/{{ vmware_vm_datacenter }}/vm/vm"

#vmware_vm_datastore_default: "esx02_ds1"
#vmware_vm_datastore_default: "datastore1"
vmware_vm_datastore_default: "nfs_ds1"
vmware_vm_datastore_folder_default: vm

#vmware_vm_controller_type_default: "lsilogic"
vmware_vm_controller_type_default: "paravirtual"

vmware_vm_network_name_default: "VM Network"
#vmware_vm_network_device_type_default: vmxnet3
vmware_vm_network_device_type_default: e1000

vmware_vm_network_type_default: dhcp

#vmware_vm_host: "esx00.dettonville.int"

vmware_vm_memory_mb_default: 1024
vmware_vm_num_cpus_default: 1
vmware_vm_disk_size_gb_default: 20
vmware_vm_disk_type_default: "thin"

vmware_vm_hardware:
  memory_mb: "{{ vmware_vm_memory_mb | d(vmware_vm_memory_mb_default) }}"
  num_cpus: "{{ vmware_vm_num_cpus | d(vmware_vm_num_cpus_default) }}"
  scsi: "{{ vmware_vm_controller_type | d(omit) }}"

vmware_vm_disks:
  - size_gb: "{{ vmware_vm_disk_size_gb | d(vmware_vm_disk_size_gb_default) }}"
    type: "{{ vmware_vm_disk_type | d(vmware_vm_disk_type_default) }}"
    datastore: "{{ vmware_vm_datastore | d(vmware_vm_datastore_default) }}"
#    controller_type: "{{ vmware_vm_controller_type | d(omit) }}"

vmware_vm_networks:
  - name: "{{ vmware_vm_network_name | d(vmware_vm_network_name_default) }}"
    mac: "{{ vmware_vm_mac_address | d(omit) }}"
    device_type: "{{ vmware_vm_network_device_type | d(vmware_vm_network_device_type_default) }}"
#      ip: 10.10.10.100
#      netmask: 255.255.255.0
#      device_type: vmxnet3
#      type: static

deploy_vm__vmware_node_info:
  name: "{{ vmware_vm_name | d(vmware_vm_name_default) }}"
  template_id: "{{ vmware_vm_image_id | d(vmware_vm_image_id_default) }}"
  os_flavor: "{{ vmware_vm_os_flavor | d(vmware_vm_os_flavor_default) }}"
  guest_id: "{{ vmware_vm_guest_id | d(vmware_vm_guest_id_default) }}"
  cluster: "{{ vmware_vm_cluster | d(vmware_vm_cluster_default) }}"
  host: "{{ vmware_vm_host | d(vmware_vm_host_default) }}"
  folder: "{{ vmware_vm_folder | d(vmware_vm_folder_default) }}"
  gateway_ipv4: "{{ vmware_vm_gateway_ipv4 | d(vmware_vm_gateway_ipv4_default) }}"
  datastore: "{{ vmware_vm_datastore | d(vmware_vm_datastore_default) }}"
  datastore_folder: "{{ vmware_vm_datastore_folder | d(vmware_vm_datastore_folder_default) }}"
  controller_type: "{{ vmware_vm_controller_type | d(vmware_vm_controller_type_default) }}"
  network_type: "{{ vmware_vm_network_type | d(vmware_vm_network_type_default) }}"
  services: "{{ vmware_node_services | d(vmware_node_services_default) }}"
  hardware: "{{ vmware_vm_hardware }}"
  disks: "{{ vmware_vm_disks }}"
  networks: "{{ vmware_vm_networks }}"
  deploy_groups: "{{ vmware_node_services|d(vmware_node_services_default) + vmware_new_vm_group_names|d([]) | flatten }}"
  deploy_vm_tags: "{{ vmware_new_vm_tags }}"
