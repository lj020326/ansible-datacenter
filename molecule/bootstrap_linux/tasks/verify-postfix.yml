---

- name: Check postfix package status
  ansible.builtin.package:
    name: "{{ bootstrap_postfix__packages }}"
    state: installed
  check_mode: true
  register: pkg_status_postfix

- name: Display pkg_status_postfix
  ansible.builtin.debug:
    var: pkg_status_postfix

- name: Check postfix packages are installed
  ansible.builtin.assert:
    that:
      - not pkg_status_postfix.changed

- name: Assert postfix service is installed/running
  ansible.builtin.assert:
    that:
      - services | intersect([postfix_service_name, postfix_service_name+'.service'])| d([]) | length > 0
