name: Keep GitHub Actions Alive
on:
  # Run once a week, well before the 60-day deadline
  schedule:
    - cron: '0 0 * * SUN' # Runs every Sunday at 00:00 UTC
  # Allows manual triggering
  workflow_dispatch:

jobs:
  keep_alive:
    runs-on: ubuntu-latest

    # Required permission to interact with the GitHub API to re-enable workflows
    permissions:
      actions: write

    steps:
      - name: Keepalive Workflow (API Mode - No Commit)
        uses: gautamkrishnar/keepalive-workflow@v1
        with:
          # This defaults to true, which uses the API to re-enable
          use_api: true
          # The token needs 'actions:write' permission
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # Recommended: Set a threshold lower than 60 days (e.g., 50 days)
          time_elapsed_threshold_in_days: 50
